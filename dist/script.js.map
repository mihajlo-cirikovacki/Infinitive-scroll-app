{"version":3,"names":[],"mappings":"","sources":["script.js"],"sourcesContent":["'use strict';\r\n\r\nconst app = (function() {\r\n  \r\n  const header = document.querySelector('.header');\r\n  const container = document.querySelector('.container');\r\n  const loader = document.querySelector('.loader');\r\n  const loader2 = document.querySelector('.loader-2');\r\n  const lightBox = document.querySelector('.lightbox');\r\n  const close = document.querySelector('.close');\r\n  const overlay = document.querySelector('.overlay');\r\n\r\n  const APIKEY = 'FG_lsD6Zlivtgn4xnB6455NlsvDPuLGjBSX-1fG00mY';\r\n  const ENDPOINT = 'https://api.unsplash.com/photos/';\r\n\r\n  let page = 1;\r\n\r\n  // ========== FETCH DATA:\r\n  const getData = async (limit = 6) => {\r\n    try {\r\n      const res = await fetch(`${ENDPOINT}?client_id=${APIKEY}&per_page=${limit}&page=${page}`);\r\n      const data = await res.json();\r\n      \r\n      return data;\r\n      \r\n    } catch(err) {\r\n      console.error(err);\r\n    };\r\n  };\r\n\r\n  // ==========  RENDER:\r\n  const showLoader = function() {\r\n    loader.classList.add('show');\r\n  }\r\n\r\n  const renderImgs = async () => {\r\n    try {\r\n      \r\n      const data = await getData();\r\n      if(!data) throw new Error('Problem with loading data. ðŸ’¥ðŸ’¥ðŸ’¥');\r\n\r\n      data.forEach(data => {\r\n        const imgContainer = document.createElement('div');\r\n        imgContainer.classList.add('img-container');\r\n        container.prepend(imgContainer);\r\n\r\n        const html = `\r\n          <div class=\"img-container__wraper\">\r\n            <img class=\"img-container__img\" src=${data.urls.full} alt=\"img\">\r\n          </div>\r\n          <div class=\"img-container__info\"> \r\n            <div class=\"img-container__likes\"><img src=\"/assets/icons-heart-.png\" class=\"img-container__icon\" alt=\"heart icon\"> Likes: <span>${data.likes}</span></div>\r\n            <div class=\"img-container__downloads\"><img src=\"/assets/icons-downloads.png\" class=\"img-container__icon\" alt=\"Download icon\"> Downloads: <span>${data.height}</span></div>\r\n          </div>\r\n          <div class=\"profile-box\">\r\n            <img src=${data.user.profile_image.large} class=\"profile-box__img\">\r\n            <div class=\"profile-box__info\">\r\n            <h4 class=\"profile-box__name\">${data.user.name}</h4>\r\n              <a href\"\" class=\"profile-box__insta\"><img src=\"/assets/icons-instagram.png\" alt=\"instagram\"></a>\r\n            </div>\r\n          </div>\r\n        `;\r\n\r\n        imgContainer.insertAdjacentHTML('afterbegin', html );\r\n      });\r\n\r\n      showLoader()\r\n      \r\n    } catch(err) {\r\n      console.error(err.message);\r\n    };\r\n  };\r\n\r\n  // ========== HANDLING INTERSECT:\r\n  const obsOptions = {\r\n    root: null,\r\n    rootMargin: '0px',\r\n    threshold: 1,\r\n  }\r\n\r\n  const handleIntersect = function(entries) {\r\n    console.log(entries);\r\n    const [entry] = entries;\r\n    if (entry.isIntersecting) {\r\n      setTimeout(() => {\r\n        page++;\r\n        renderImgs(), 300\r\n      });\r\n    } \r\n  }\r\n\r\n  const observer = new IntersectionObserver(handleIntersect, obsOptions);\r\n  observer.observe(loader); \r\n\r\n\r\n  // ========== ADD/REMOVES LIGHTBOX/OVERLAY:\r\n  const removeLightBox = function() {\r\n    lightBox.classList.add('hidden');\r\n    overlay.classList.add('hidden');\r\n    lightBox.querySelector('img').remove();\r\n  }\r\n\r\n  const addLightBox = function() {\r\n    lightBox.classList.remove('hidden');\r\n    overlay.classList.remove('hidden');\r\n    close.classList.remove('hidden')\r\n  }\r\n\r\n  // ==========  EVENT LISTENERS:\r\n  header.addEventListener('click', (e) => {\r\n    const currView = e.target.closest('.view');\r\n    if(!currView) return;\r\n\r\n    if (currView.classList.contains('view-list')) {\r\n      container.classList.remove('container');\r\n      container.classList.add('view-list');\r\n    } \r\n    if (currView.classList.contains('view-grid')) {\r\n      container.classList.add('container');\r\n      container.classList.remove('view-list');\r\n    }\r\n  });\r\n\r\n  container.addEventListener('click', (e) => {\r\n    const currImg = e.target.closest('.img-container');\r\n    if(!currImg) return;\r\n    \r\n    const img = currImg.querySelector('.img-container__img');\r\n    const imgHtml = `\r\n      <img src=\"${img.src}\" alt=\"${img.alt}\">  \r\n    `;\r\n\r\n    lightBox.insertAdjacentHTML('afterbegin', imgHtml)\r\n    addLightBox();\r\n  });\r\n\r\n  overlay.addEventListener('click', (e) => {\r\n    removeLightBox();\r\n  });\r\n\r\n  close.addEventListener('click', (e) => {\r\n    removeLightBox();\r\n  });\r\n\r\n  document.addEventListener('keydown', (e) => {\r\n    if (e.key === 'Escape') removeLightBox();\r\n  }); \r\n    \r\n  return {\r\n    renderImgs\r\n  }\r\n})();\r\n\r\napp.renderImgs();\r\n\r\n"],"file":"script.js"}