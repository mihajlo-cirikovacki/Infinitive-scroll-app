{"version":3,"names":[],"mappings":"","sources":["script.js"],"sourcesContent":["'use strict';\r\n\r\nconst app = (function() {\r\n\r\n  const loader = document.querySelector('.loader');\r\n  const container = document.querySelector('.infinite-scroll-container');\r\n\r\n  const APIKEY = 'FG_lsD6Zlivtgn4xnB6455NlsvDPuLGjBSX-1fG00mY';\r\n  const BYPASS_CROSS = 'https://cors.bridged.cc/';\r\n  const ENDPOINT = 'https://api.unsplash.com/photos/';\r\n  let page = 1;\r\n\r\n  // === FETCH DATA:\r\n  const getData = async (limit = 12) => {\r\n    try {\r\n      const res = await fetch(`${ENDPOINT}?client_id=${APIKEY}&per_page=${limit}&page=${page}`);\r\n      const data = await res.json();\r\n      \r\n      return data;\r\n      \r\n    } catch(err) {\r\n      console.error(err);\r\n    };\r\n  };\r\n\r\n  // === RENDER:\r\n  const showLoader = function() {\r\n    loader.classList.add('show')\r\n  }\r\n\r\n  const renderImgs = async () => {\r\n    try {\r\n      showLoader();\r\n\r\n      const data = await getData();\r\n      if(!data) throw new Error('Problem with loading data. ðŸ’¥ðŸ’¥ðŸ’¥');\r\n\r\n      data.forEach(data => {\r\n        const figureEl = document.createElement('figure');\r\n        figureEl.classList.add('img-container');\r\n        container.prepend(figureEl);\r\n\r\n        const html = `\r\n          <img class=\"img-container__img\" src=${data.urls.full} alt=\"img\">\r\n\r\n          <blockquote class=\"img-container__likes\"><img src=\"/assets/icons-heart-.png\" class=\"img-container__icon\" alt=\"heart icon\">Likes:<span>${data.likes}</span></blockquote>\r\n          <blockquote class=\"img-container__downloads\"><img src=\"/assets/icons-downloads.png\" class=\"img-container__icon\" alt=\"Download icon\">Downloads:<span>${data.height}</span></blockquote>\r\n          <div class=\"profile-box\">\r\n            <img src=${data.user.profile_image.large} class=\"profile-box__img\">\r\n            <div class=\"profile-box__info\">\r\n            <h4 class=\"profile-box__name\">${data.user.name}</h4>\r\n              <a href\"\" class=\"profile-box__insta\"><img src=\"/assets/icons-instagram.png\" alt=\"instagram\"></a>\r\n            </div>\r\n          </div>\r\n        `;\r\n\r\n        figureEl.insertAdjacentHTML('afterbegin', html );\r\n      });\r\n      \r\n    } catch(err) {\r\n      console.error(err.message);\r\n    };\r\n  };\r\n\r\n  // HANDLING INTERSECT:\r\n  const obsOptions = {\r\n    root: null,\r\n    rootMargin: '0px',\r\n    threshold: 0.25,\r\n  }\r\n\r\n  const handleIntersect = function(entries) {\r\n    const [entry] = entries;\r\n    if (entry.isIntersecting) {\r\n      page++;\r\n      renderImgs();\r\n    } \r\n  }\r\n\r\n  const observer = new IntersectionObserver(handleIntersect, obsOptions);\r\n  observer.observe(loader); \r\n\r\n  return {\r\n    renderImgs\r\n  }\r\n})();\r\n\r\napp.renderImgs();\r\n\r\n"],"file":"script.js"}